#!/usr/bin/env python3
"""Script para traducir al portugués"""

translations_pt = {
    # Títulos
    "SecureApprove - Sistema de Aprobaciones Seguras": "SecureApprove - Sistema de Aprovações Seguras",
    "Sistema de aprobaciones seguras con autenticación biométrica": "Sistema de aprovações seguras com autenticação biométrica",
    "Sistema de Aprobaciones Seguras con Autenticación Biométrica": "Sistema de Aprovações Seguras com Autenticação Biométrica",
    "Automatiza tus procesos de aprobación con seguridad de nivel empresarial y autenticación biométrica avanzada.": "Automatize seus processos de aprovação com segurança de nível empresarial e autenticação biométrica avançada.",
    
    # Botones
    "Comenzar Ahora": "Começar Agora",
    "Ver Demo": "Ver Demo",
    "Comenzar Gratis": "Começar Grátis",
    "Suscribirme Ahora": "Assinar Agora",
    "Suscribirse": "Assinar",
    "Volver": "Voltar",
    "Aprobar Solicitud": "Aprovar Solicitação",
    "Rechazar": "Rejeitar",
    "Solicitar Info": "Solicitar Info",
    
    # Navegación
    "Características": "Características",
    "Precios": "Preços",
    "Contacto": "Contato",
    "Entrar": "Entrar",
    "Iniciar Sesión": "Iniciar Sessão",
    "Registrarse": "Registrar-se",
    
    # Características
    "Autenticación Biométrica": "Autenticação Biométrica",
    "Seguridad de nivel empresarial con autenticación por huella dactilar, reconocimiento facial y llaves de seguridad.": "Segurança de nível empresarial com autenticação por impressão digital, reconhecimento facial e chaves de segurança.",
    
    "Flujos Personalizables": "Fluxos Personalizáveis",
    "Crea flujos de aprobación adaptados a tus necesidades empresariales específicas.": "Crie fluxos de aprovação adaptados às suas necessidades empresariais específicas.",
    
    "Auditoría Completa": "Auditoria Completa",
    "Registro detallado de todas las acciones y decisiones para cumplimiento normativo.": "Registro detalhado de todas as ações e decisões para conformidade regulamentar.",
    
    "Notificaciones en Tiempo Real": "Notificações em Tempo Real",
    "Mantén a tu equipo informado con notificaciones instantáneas de solicitudes pendientes.": "Mantenha sua equipe informada com notificações instantâneas de solicitações pendentes.",
    
    "Integración API": "Integração API",
    "Conecta SecureApprove con tus sistemas existentes a través de nuestra API REST.": "Conecte o SecureApprove com seus sistemas existentes através de nossa API REST.",
    
    "Multi-tenancy": "Multi-inquilino",
    "Gestiona múltiples organizaciones desde una sola instalación de forma segura.": "Gerencie múltiplas organizações a partir de uma única instalação de forma segura.",
    
    # Planes
    "Planes y Precios": "Planos e Preços",
    "Elige el plan perfecto para tu empresa": "Escolha o plano perfeito para sua empresa",
    
    "Básico": "Básico",
    "Ideal para pequeños equipos": "Ideal para pequenas equipes",
    "Por usuario/mes": "Por usuário/mês",
    "Usuarios": "Usuários",
    "Solicitudes/mes": "Solicitações/mês",
    "Autenticación biométrica": "Autenticação biométrica",
    "Soporte por email": "Suporte por email",
    
    "Profesional": "Profissional",
    "Para empresas en crecimiento": "Para empresas em crescimento",
    "Ilimitado": "Ilimitado",
    "Flujos personalizados": "Fluxos personalizados",
    "API REST": "API REST",
    "Soporte prioritario": "Suporte prioritário",
    "Más Popular": "Mais Popular",
    
    "Empresarial": "Empresarial",
    "Para grandes organizaciones": "Para grandes organizações",
    "Soporte 24/7": "Suporte 24/7",
    "Gerente de cuenta dedicado": "Gerente de conta dedicado",
    "SLA garantizado": "SLA garantido",
    
    # Testimonios
    "Lo que dicen nuestros clientes": "O que dizem nossos clientes",
    
    # Footer
    "Producto": "Produto",
    "Recursos": "Recursos",
    "Legal": "Legal",
    "Documentación": "Documentação",
    "Blog": "Blog",
    "Privacidad": "Privacidade",
    "Términos": "Termos",
    "Todos los derechos reservados": "Todos os direitos reservados",
    
    # Demo
    "Demo - SecureApprove": "Demo - SecureApprove",
    "Demostración Interactiva": "Demonstração Interativa",
    "Esta es una demo de cómo funciona el proceso de aprobación en SecureApprove. Los botones son interactivos para simular la experiencia real.": "Esta é uma demonstração de como funciona o processo de aprovação no SecureApprove. Os botões são interativos para simular a experiência real.",
    
    "Compra de Equipos de Oficina": "Compra de Equipamentos de Escritório",
    "Pendiente": "Pendente",
    "Prioridad": "Prioridade",
    "Media": "Média",
    "SOLICITANTE": "SOLICITANTE",
    "Ana García": "Ana García",
    "DEPARTAMENTO": "DEPARTAMENTO",
    "Recursos Humanos": "Recursos Humanos",
    "DESCRIPCIÓN": "DESCRIÇÃO",
    "Solicitud para la compra de 3 sillas ergonómicas y 2 escritorios ajustables para el nuevo equipo de trabajo remoto. Los equipos actuales no cumplen con los estándares ergonómicos necesarios para el trabajo prolongado.": "Solicitação para compra de 3 cadeiras ergonômicas e 2 mesas ajustáveis para a nova equipe de trabalho remoto. Os equipamentos atuais não atendem aos padrões ergonômicos necessários para o trabalho prolongado.",
    
    "DOCUMENTOS ADJUNTOS": "DOCUMENTOS ANEXADOS",
    
    "¿Te gusta lo que ves?": "Você gosta do que vê?",
    "Comienza a gestionar tus aprobaciones de manera profesional": "Comece a gerenciar suas aprovações profissionalmente",
    
    # Mensajes
    "¡Solicitud Aprobada!": "Solicitação Aprovada!",
    "La solicitud ha sido aprobada exitosamente. Se ha enviado notificación al solicitante y se procederá con la compra.": "A solicitação foi aprovada com sucesso. A notificação foi enviada ao solicitante e a compra será processada.",
    
    "Solicitud Rechazada": "Solicitação Rejeitada",
    "La solicitud ha sido rechazada. Se ha enviado notificación al solicitante con los motivos del rechazo.": "A solicitação foi rejeitada. A notificação foi enviada ao solicitante com os motivos da rejeição.",
    
    "Información Solicitada": "Informação Solicitada",
    "Se ha enviado una solicitud de información adicional al solicitante. La aprobación quedará pendiente hasta recibir los datos necesarios.": "Uma solicitação de informações adicionais foi enviada ao solicitante. A aprovação ficará pendente até receber os dados necessários.",
    
    # Temas
    "Claro": "Claro",
    "Oscuro": "Escuro",
    "Sistema": "Sistema",
    
    # Common
    "SecureApprove": "SecureApprove",
    "Dashboard": "Painel",
    "Panel de Control": "Painel de Controle",
    "Solicitudes": "Solicitações",
    "Requests": "Solicitações",
    "Nueva Solicitud": "Nova Solicitação",
    "Todas las Solicitudes": "Todas as Solicitações",
    "Mis Solicitudes": "Minhas Solicitações",
    "Bienvenido de vuelta": "Bem-vindo de volta",
    "Aprobado": "Aprovado",
    "Rechazado": "Rejeitado",
    "Perfil": "Perfil",
    "Cerrar Sesión": "Sair",
    "Sistema de aprobaciones seguras para empresas modernas.": "Sistema de aprovações seguras para empresas modernas.",
}

def fix_po_file(filepath):
    """Rellena los msgstr vacíos con las traducciones"""
    with open(filepath, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    
    output = []
    i = 0
    changes = 0
    
    while i < len(lines):
        line = lines[i]
        output.append(line)
        
        # Buscar msgid
        if line.startswith('msgid "') and not line.startswith('msgid ""'):
            # Extraer el texto del msgid
            msgid_text = line[7:-2]
            
            # Manejar msgid multilínea
            j = i + 1
            while j < len(lines) and lines[j].startswith('"'):
                msgid_text += lines[j][1:-2]
                output.append(lines[j])
                j += 1
            
            # Verificar si el siguiente es msgstr vacío
            if j < len(lines) and lines[j].startswith('msgstr ""'):
                if msgid_text in translations_pt:
                    # Reemplazar con la traducción
                    output.append(f'msgstr "{translations_pt[msgid_text]}"\n')
                    changes += 1
                    i = j + 1
                    continue
        
        i += 1
    
    # Escribir el archivo
    with open(filepath, 'w', encoding='utf-8') as f:
        f.writelines(output)
    
    print(f"✓ Archivo procesado: {filepath}")
    print(f"  {changes} traducciones agregadas")

if __name__ == '__main__':
    import sys
    if len(sys.argv) > 1:
        fix_po_file(sys.argv[1])
    else:
        print("Uso: python fix_translations_pt.py <archivo.po>")
