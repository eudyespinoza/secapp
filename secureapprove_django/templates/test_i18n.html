{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <title>Test i18n</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .test-section { border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
        .success { background: #d4edda; }
        .fail { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>И Diagn贸stico de Traducciones</h1>
    
    <div class="test-section">
        <h2>1. Configuraci贸n Actual</h2>
        <p><strong>LANGUAGE_CODE:</strong> {{ LANGUAGE_CODE }}</p>
        <p><strong>URL actual:</strong> {{ request.path }}</p>
        <p><strong>Cookie django_language:</strong> {{ request.COOKIES.django_language|default:"No establecida" }}</p>
        <p><strong>Session language:</strong> {{ request.session.django_language|default:"No establecida" }}</p>
    </div>
    
    <div class="test-section">
        <h2>2. Pruebas de Traducci贸n</h2>
        <table>
            <tr><td><strong>Cadena:</strong></td><td><strong>Traducci贸n:</strong></td></tr>
            <tr><td>"Dashboard"</td><td>{% trans "Dashboard" %}</td></tr>
            <tr><td>"Welcome back"</td><td>{% trans "Welcome back" %}</td></tr>
            <tr><td>"Requests"</td><td>{% trans "Requests" %}</td></tr>
            <tr><td>"New Request"</td><td>{% trans "New Request" %}</td></tr>
            <tr><td>"Pending"</td><td>{% trans "Pending" %}</td></tr>
            <tr><td>"Approved"</td><td>{% trans "Approved" %}</td></tr>
        </table>
    </div>
    
    <div class="test-section">
        <h2>3. Cambiar Idioma</h2>
        {% get_available_languages as LANGUAGES %}
        {% for lang_code, lang_name in LANGUAGES %}
            <form action="{% url 'set_language' %}" method="post" style="display:inline">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.path }}" />
                <input name="language" type="hidden" value="{{ lang_code }}" />
                <button type="submit" style="padding: 10px 20px; margin: 5px;">
                    {{ lang_name }} ({{ lang_code }})
                </button>
            </form>
        {% endfor %}
    </div>
    
    <div class="test-section">
        <h2>4. Enlaces Directos</h2>
        <p><a href="/es{{ request.path|slice:'3:' }}"> Espa帽ol</a></p>
        <p><a href="/en{{ request.path|slice:'3:' }}">吼 English</a></p>
        <p><a href="/pt-br{{ request.path|slice:'6:' }}">ю Portugu锚s</a></p>
    </div>
</body>
</html>
