# ==============================================
# SecureApprove - Production Environment Template
# ==============================================
# Copy this file to .env and configure with real values
# NEVER commit .env to version control

# ==============================================
# APPLICATION
# ==============================================
NODE_ENV=production
APP_NAME=SecureApprove
APP_VERSION=1.0.0
APP_URL=https://secureapprove.com
API_URL=https://api.secureapprove.com
DOMAIN=secureapprove.com

# ==============================================
# API CONFIGURATION
# ==============================================
API_PORT=3000
API_INSTANCES=3
API_WORKERS=4
API_TIMEOUT=30000

# ==============================================
# DATABASE - MongoDB ReplicaSet
# ==============================================
MONGODB_URI=mongodb://mongodb-primary:27017,mongodb-secondary1:27017,mongodb-secondary2:27017/secureapprove?replicaSet=rs0
MONGODB_DATABASE=secureapprove
MONGODB_USER=secureapprove_admin
MONGODB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE_MIN_32_CHARS
MONGODB_ROOT_USER=root
MONGODB_ROOT_PASSWORD=CHANGE_ME_ROOT_PASSWORD_MIN_32_CHARS
MONGODB_REPLICA_SET_KEY=GENERATE_WITH_openssl_rand_base64_756

# ==============================================
# REDIS - High Availability with Sentinel
# ==============================================
REDIS_HOST=redis-master
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_MIN_24_CHARS
REDIS_SENTINEL_HOSTS=sentinel1:26379,sentinel2:26380,sentinel3:26381
REDIS_SENTINEL_PASSWORD=CHANGE_ME_SENTINEL_PASSWORD_MIN_24_CHARS
REDIS_MASTER_NAME=mymaster
REDIS_DB=0
REDIS_TTL=3600

# ==============================================
# JWT & AUTHENTICATION
# ==============================================
JWT_SECRET=GENERATE_WITH_openssl_rand_hex_64
JWT_REFRESH_SECRET=GENERATE_WITH_openssl_rand_hex_64
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d
JWT_ISSUER=secureapprove.com
JWT_AUDIENCE=secureapprove-api

# ==============================================
# WEBAUTHN CONFIGURATION
# ==============================================
WEBAUTHN_RP_NAME=SecureApprove
WEBAUTHN_RP_ID=secureapprove.com
WEBAUTHN_ORIGIN=https://secureapprove.com
WEBAUTHN_TIMEOUT=60000
WEBAUTHN_ATTESTATION=none
WEBAUTHN_USER_VERIFICATION=preferred

# ==============================================
# ENCRYPTION
# ==============================================
ENCRYPTION_KEY=GENERATE_WITH_openssl_rand_hex_32
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_IV_LENGTH=16
ENCRYPTION_TAG_LENGTH=16

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WEBAUTHN_MAX=10
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_API_MAX=1000

# ==============================================
# SECURITY
# ==============================================
CORS_ORIGIN=https://secureapprove.com,https://admin.secureapprove.com
CORS_CREDENTIALS=true
HELMET_CSP_ENABLED=true
SESSION_SECRET=GENERATE_WITH_openssl_rand_hex_64
BCRYPT_ROUNDS=12

# ==============================================
# SSL/TLS CERTIFICATES
# ==============================================
SSL_CERT_PATH=/certs/fullchain.pem
SSL_KEY_PATH=/certs/privkey.pem
SSL_CA_PATH=/certs/chain.pem
MTLS_ENABLED=true
MTLS_CLIENT_CERT_PATH=/certs/client-cert.pem

# ==============================================
# EMAIL SERVICE (SMTP)
# ==============================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=apikey
SMTP_PASSWORD=YOUR_SENDGRID_API_KEY_HERE
SMTP_FROM=noreply@secureapprove.com
SMTP_FROM_NAME=SecureApprove

# ==============================================
# PUSH NOTIFICATIONS
# ==============================================
FCM_SERVER_KEY=YOUR_FIREBASE_SERVER_KEY_HERE
FCM_SENDER_ID=YOUR_FIREBASE_SENDER_ID_HERE
APNS_KEY_ID=YOUR_APPLE_PUSH_KEY_ID_HERE
APNS_TEAM_ID=YOUR_APPLE_TEAM_ID_HERE
APNS_CERT_PATH=/certs/apns-cert.pem

# ==============================================
# AWS S3 (Backups & Assets)
# ==============================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_HERE
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY_HERE
AWS_S3_BUCKET=secureapprove-backups
AWS_S3_BACKUP_RETENTION_DAYS=30

# ==============================================
# MONITORING - Prometheus & Grafana
# ==============================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD_MIN_16_CHARS
GRAFANA_SECRET_KEY=GENERATE_WITH_openssl_rand_hex_32

# ==============================================
# LOGGING - Sentry Error Tracking
# ==============================================
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_ENABLED=true

# ==============================================
# TRAEFIK LOAD BALANCER
# ==============================================
TRAEFIK_DASHBOARD_PORT=8080
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASSWORD=GENERATE_WITH_htpasswd_bcrypt
TRAEFIK_ACME_EMAIL=admin@secureapprove.com
TRAEFIK_ACME_STORAGE=/letsencrypt/acme.json

# ==============================================
# BACKUP CONFIGURATION
# ==============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=gzip
BACKUP_ENCRYPTION_KEY=GENERATE_WITH_openssl_rand_hex_32

# ==============================================
# FEATURE FLAGS
# ==============================================
FEATURE_REGISTRATION_ENABLED=true
FEATURE_TOTP_BACKUP=true
FEATURE_AUDIT_LOGGING=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_MULTI_TENANT=false

# ==============================================
# PERFORMANCE TUNING
# ==============================================
MAX_UPLOAD_SIZE=10485760
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000
BODY_PARSER_LIMIT=10mb
COMPRESSION_ENABLED=true

# ==============================================
# DEVELOPMENT & DEBUG (disable in production)
# ==============================================
DEBUG=false
LOG_LEVEL=info
ENABLE_SWAGGER=false
ENABLE_METRICS_ENDPOINT=true
